(this.webpackJsonpStrangers_Things=this.webpackJsonpStrangers_Things||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(3),s=n.n(r),c=n(5),a=n(4),o=n(1),i=n(12),u=n.n(i),j=n(6),l=n(2),b=n(13),p=(n(19),n(20),n(0)),d=function(e){var t=e.isLoggedIn,n=e.currentUser,r=Object(l.f)();return Object(o.useEffect)((function(){t||r("/login")}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Account Page"}),Object(p.jsxs)("h2",{children:[" Welcome ",n&&n.username," "]}),Object(p.jsxs)("div",{className:"accountIconsContainer",children:[Object(p.jsx)("div",{children:Object(p.jsxs)(j.b,{className:"inbox",to:"/inbox",children:[Object(p.jsx)("img",{src:"images/inbox.png",alt:"Inbox"}),"Inbox"]})}),Object(p.jsx)("div",{children:Object(p.jsxs)(j.b,{className:"newPost",to:"/newpost",children:[Object(p.jsx)("img",{src:"images/createNewPost.png",alt:"Create a New Post"}),"Create a New Post"]})}),Object(p.jsx)("div",{children:Object(p.jsxs)(j.b,{className:"myPosts",to:"/myposts",children:[Object(p.jsx)("img",{src:"images/myPosts.png",alt:"My Posts"}),"My Posts"]})})]})]})},h=(n(22),function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Welcome to Stranger's Things"}),Object(p.jsx)("img",{className:"spongebob",src:"./images/SpongebobTrade.jpeg",alt:"Spongebob scene where two fish trade boxes"}),Object(p.jsx)("h3",{children:" Buy, sell, and trade your goods today!"})]})}),O=function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},e.next=4,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me",{headers:n});case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("util js"),event.preventDefault(),e.next=5,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:n})});case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,console.log(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,console.log(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/".concat(n,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({comment:{content:r}})});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),f=(n(23),function(e){var t=e.isLoggedIn,n=e.token,r=e.post_id,i=Object(l.f)(),u=Object(o.useState)(""),j=Object(a.a)(u,2),b=j[0],d=j[1],h=Object(o.useState)(""),O=Object(a.a)(h,2),g=O[0],x=O[1];Object(o.useEffect)((function(){t||i("/login")}),[]);var f=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(n,r,g);case 3:e.sent,alert("Message Sent"),i("/posts");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Send Message"}),Object(p.jsxs)("form",{onSubmit:f,children:[Object(p.jsx)("input",{type:"text",id:"username",placeholder:"My Username",minLength:"1",value:b,onChange:function(e){return d(e.target.value)},required:!0}),Object(p.jsx)("textarea",{type:"text",id:"message",placeholder:"Enter Message Here",minLength:"1",value:g,onChange:function(e){return x(e.target.value)},required:!0}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",children:"Send Message"})]})]})}),v=function(e){var t=e.isLoggedIn,n=Object(l.f)();return Object(o.useEffect)((function(){t||n("/login")}),[]),Object(p.jsx)("h1",{children:"Inbox"})},w=(n(24),function(e){var t=e.setToken,n=e.setIsLoggedIn,r=e.isLoggedIn,i=e.setCurrentUser,u=Object(o.useState)(""),b=Object(a.a)(u,2),d=b[0],h=b[1],g=Object(o.useState)(""),x=Object(a.a)(g,2),m=x[0],f=x[1],v=Object(o.useState)(!1),w=Object(a.a)(v,2),y=w[0],k=w[1],C=Object(o.useState)(""),S=Object(a.a)(C,2),I=S[0],N=S[1],L=Object(l.f)();Object(o.useEffect)((function(){r&&L("/account")}),[]);var P=function(){var e=Object(c.a)(s.a.mark((function e(r){var c,a,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:d,password:m}})});case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,o=a.data.token,t(o),n(!0),e.next=13,O(o);case 13:u=e.sent,i(u.data),k(!1),L("/account"),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),console.error,"Incorrect username and password combination.",N("Incorrect username and password combination."),k(!0);case 25:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"loginForm",children:[Object(p.jsxs)("form",{onSubmit:P,children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)("input",{type:"text",id:"username",placeholder:"username",minLength:"6",onChange:function(e){h(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",id:"password",placeholder:"password",minLength:"6",onChange:function(e){f(e.target.value)},required:!0}),y?Object(p.jsx)("div",{className:"error",children:I}):null,Object(p.jsx)("button",{type:"submit",children:"Login"})]}),Object(p.jsx)("div",{className:"registerLink",children:Object(p.jsxs)(j.b,{to:"/register",children:["Don't have an account? ",Object(p.jsx)("br",{})," Sign up!"]})})]})})}),y=function(){return Object(p.jsx)("h1",{children:" You have been logged out of your account. "})},k=(n(11),"".concat("https://strangers-things.herokuapp.com","/api/").concat("2108-CSE-RM-WEB-PT","/posts")),C=function(e){var t=e.isLoggedIn,n=e.token,r=e.currentUser,i=Object(l.f)(),u=Object(o.useState)([]),b=Object(a.a)(u,2),d=b[0],h=b[1],O=Object(j.d)(),g=Object(a.a)(O,2),m=g[0],f=g[1],v=m.get("searchTerm");Object(o.useEffect)((function(){t||i("/login")}),[]);var w=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(k);case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(n=e.sent).error){e.next=9;break}throw n.error;case 9:r=n.data.posts,h(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Trouble gathering posts!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)(w,[]);var y=v?d.filter((function(e){return function(e,t){t=t.toLowerCase();for(var n=0,r=[e.title,e.description,e.location,e.price];n<r.length;n++)if(r[n].toLowerCase().includes(t))return!0}(e,v)})):d,C=function(){var e=Object(c.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(n,t);case 2:r=d.filter((function(e){return t!==e._id})),h(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:" My Posts "}),Object(p.jsxs)("div",{className:"options",children:[Object(p.jsx)("input",{type:"text",name:"search",placeholder:"Search",value:v,onChange:function(e){f({searchTerm:e.target.value})}}),Object(p.jsx)(j.b,{className:"createPostButton",to:"/NewPost",children:"Create a New Post?"})]}),y&&y.length?y.map((function(e,t){if(r.username===e.author.username)return Object(p.jsxs)("div",{className:"Post",children:[Object(p.jsxs)("div",{className:"postColumn1",children:[Object(p.jsx)("div",{className:"title",children:e.title}),Object(p.jsx)("div",{className:"description",children:e.description}),Object(p.jsx)(p.Fragment,{children:r.username===e.author.username&&Object(p.jsx)("button",{onClick:function(){return C(e._id)},children:"Delete"})})]}),Object(p.jsxs)("div",{className:"postColumn2",children:[Object(p.jsxs)("div",{className:"username",children:[Object(p.jsx)("b",{children:"Seller:"})," ",e.author.username]}),Object(p.jsxs)("div",{className:"location",children:[Object(p.jsx)("b",{children:"Location:"})," ",e.location]}),Object(p.jsxs)("div",{className:"price",children:[Object(p.jsx)("b",{children:"Price:"}),e.price]})]})]},t)})):""]})},S=n(8),I=(n(25),function(e){var t=e.token,n=e.isLoggedIn,r={title:"",description:"",price:"",location:"",willDeliver:!1},i=Object(o.useState)(r),u=Object(a.a)(i,2),j=u[0],b=u[1],d=Object(l.f)();Object(o.useEffect)((function(){n||d("/login")}),[]);var h=function(){var e=Object(c.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g(t,j);case 3:b(r),d("/posts");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Add New Post"}),Object(p.jsxs)("form",{onSubmit:h,children:[Object(p.jsx)("input",{type:"text",name:"title",value:j.title,placeholder:"Item for Sale",minLength:"1",required:!0,onChange:function(e){b(Object(S.a)(Object(S.a)({},j),{},{title:e.target.value}))}}),Object(p.jsx)("input",{type:"text",name:"description",value:j.description,placeholder:"Description",minLength:"1",required:!0,onChange:function(e){b(Object(S.a)(Object(S.a)({},j),{},{description:e.target.value}))}}),Object(p.jsx)("input",{type:"number",name:"price",value:j.price,placeholder:"Price",required:!0,onChange:function(e){b(Object(S.a)(Object(S.a)({},j),{},{price:e.target.value}))}}),Object(p.jsx)("input",{type:"text",name:"location",value:j.location,placeholder:"Location",onChange:function(e){b(Object(S.a)(Object(S.a)({},j),{},{location:e.target.value}))}}),Object(p.jsx)("input",{type:"checkbox",id:"willDeliver",name:"willDeliver",value:j.willDeliver,onChange:function(e){b(Object(S.a)(Object(S.a)({},j),{},{willDeliver:e.target.checked}))}}),Object(p.jsx)("label",{name:"willDeliver",children:"Willing to Deliver?"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",children:"Create"})]})]})}),N="".concat("https://strangers-things.herokuapp.com","/api/").concat("2108-CSE-RM-WEB-PT","/posts"),L=function(e){var t=e.token,n=e.currentUser,r=Object(o.useState)([]),i=Object(a.a)(r,2),u=i[0],l=i[1],b=Object(j.d)(),d=Object(a.a)(b,2),h=d[0],O=d[1],g=h.get("searchTerm"),m=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N);case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(n=e.sent).error){e.next=9;break}throw n.error;case 9:r=n.data.posts,l(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Trouble gathering posts!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)(m,[]);var f=g?u.filter((function(e){return function(e,t){t=t.toLowerCase();for(var n=0,r=[e.title,e.description,e.location,e.price];n<r.length;n++)if(r[n].toLowerCase().includes(t))return!0}(e,g)})):u,v=function(){var e=Object(c.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,n);case 2:r=u.filter((function(e){return n!==e._id})),l(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Posts"}),Object(p.jsxs)("div",{className:"options",children:[Object(p.jsx)("input",{type:"text",name:"search",placeholder:"Search",value:g,onChange:function(e){O({searchTerm:e.target.value})}}),Object(p.jsx)(j.b,{className:"createPostButton",to:"/NewPost",children:"Create a New Post?"})]}),f&&f.length?f.map((function(e,t){return Object(p.jsxs)("div",{className:"Post",children:[Object(p.jsxs)("div",{className:"postColumn1",children:[Object(p.jsx)("div",{className:"title",children:e.title}),Object(p.jsx)("div",{className:"description",children:e.description}),Object(p.jsx)(p.Fragment,{children:n.username===e.author.username&&Object(p.jsx)("button",{onClick:function(){return v(e._id)},children:"Delete"})})]}),Object(p.jsxs)("div",{className:"postColumn2",children:[Object(p.jsxs)("div",{className:"username",children:[Object(p.jsx)("b",{children:"Seller:"})," ",e.author.username]}),Object(p.jsxs)("div",{className:"location",children:[Object(p.jsx)("b",{children:"Location:"})," ",e.location]}),Object(p.jsxs)("div",{className:"price",children:[Object(p.jsx)("b",{children:"Price:"}),e.price]}),n.username!==e.author.username&&Object(p.jsxs)("div",{className:"sendMessage",children:[Object(p.jsx)(j.b,{className:"postImage",to:"/sendmessage",children:Object(p.jsx)("img",{src:"images/sendMessage.png",alt:"Send Message"})}),Object(p.jsx)(j.b,{className:"postImage",to:"/sendmessage",children:"Send Message"})]})]})]},t)})):null]})},P=(n(26),function(e){var t=e.setToken,n=e.setIsLoggedIn,r=e.setCurrentUser,i=Object(o.useState)(""),u=Object(a.a)(i,2),j=u[0],b=u[1],d=Object(o.useState)(""),h=Object(a.a)(d,2),g=h[0],x=h[1],m=Object(o.useState)(""),f=Object(a.a)(m,2),v=f[0],w=f[1],y=Object(o.useState)(!1),k=Object(a.a)(y,2),C=k[0],S=k[1],I=Object(o.useState)(""),N=Object(a.a)(I,2),L=N[0],P=N[1],T=Object(l.f)(),E=function(){var e=Object(c.a)(s.a.mark((function e(c){var a,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.preventDefault(),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:j,password:g}})});case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,i=o.data.token,t(i),n(!0),e.next=13,O(i);case 13:u=e.sent,r(u.data),T("/account"),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(0),console.error,"Username already taken.",P("Username already taken."),S(!0);case 24:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"REGISTER"}),Object(p.jsxs)("form",{onSubmit:E,children:[Object(p.jsx)("input",{type:"text",value:j,id:"username",placeholder:"username",minLength:"6",onChange:function(e){b(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",value:g,id:"password",placeholder:"password",minLength:"6",onChange:function(e){x(e.target.value)},required:!0}),Object(p.jsx)("input",{type:"password",value:v,id:"confirm_password",name:"confirm_password",placeholder:"confirm password",onChange:function(e){w(e.target.value)},required:!0}),g!==v&&Object(p.jsx)("div",{children:"Passwords do not match"}),C?Object(p.jsx)("div",{className:"error",children:L}):null,Object(p.jsx)("button",{type:"submit",children:"Create Account"})]})]})}),T=function(){var e=Object(o.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(!1),u=Object(a.a)(i,2),O=u[0],g=u[1],x=Object(o.useState)({}),m=Object(a.a)(x,2),k=m[0],S=m[1];return Object(b.useEffect)(Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=8;break}return r(t),g(!0),e.next=6,fetchUserData(t);case 6:n=e.sent,S(n.data.guest);case 8:case"end":return e.stop()}}),e)}))),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("nav",{children:[Object(p.jsx)("h1",{className:"logo",children:" Stranger's Things "}),Object(p.jsx)(j.c,{to:"/",children:"Home"}),Object(p.jsx)(j.c,{to:"/login",children:"Account"}),Object(p.jsx)(j.c,{to:"/posts",children:"Posts"}),O?Object(p.jsx)(j.c,{to:"/logout",onClick:function(){r(""),g(!1),S(!1)},children:"Logout"}):""]}),Object(p.jsx)("hr",{}),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{path:"/account",element:Object(p.jsx)(d,{isLoggedIn:O,currentUser:k})}),Object(p.jsx)(l.a,{path:"/",exact:!0,element:Object(p.jsx)(h,{})}),Object(p.jsx)(l.a,{path:"/inbox",element:Object(p.jsx)(v,{token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S})}),Object(p.jsx)(l.a,{path:"/login",element:Object(p.jsx)(w,{setToken:r,token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S})}),Object(p.jsx)(l.a,{path:"/myposts",element:Object(p.jsx)(C,{token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S,currentUser:k})}),Object(p.jsx)(l.a,{path:"/newpost",element:Object(p.jsx)(I,{token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S})}),Object(p.jsx)(l.a,{path:"/posts",element:Object(p.jsx)(L,{token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S,currentUser:k})}),Object(p.jsx)(l.a,{path:"/register",element:Object(p.jsx)(P,{setToken:r,token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S})}),Object(p.jsx)(l.a,{path:"/sendmessage",element:Object(p.jsx)(f,{token:n,setIsLoggedIn:g,isLoggedIn:O,setCurrentUser:S})}),Object(p.jsx)(l.a,{path:"/logout",element:Object(p.jsx)(y,{ssetIsLoggedIn:g,setCurrentUser:S})})]})]})};u.a.render(Object(p.jsx)(j.a,{children:Object(p.jsx)(T,{})}),document.getElementById("app"))}],[[27,1,2]]]);
//# sourceMappingURL=main.d7199a67.chunk.js.map